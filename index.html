<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ModWapp - University Marketplace</title>
<style>
:root{--bg:linear-gradient(135deg,#0a0a0a 0%,#1a1a1a 50%,#2d2d2d 100%);--glass:rgba(255,255,255,.1);--border:rgba(255,255,255,.2);--text:#fff;--text2:#c0c0c0;--accent:#FFD700;--accent2:#FFA500;--shadow:0 8px 32px rgba(0,0,0,.3)}
[data-theme="light"]{--bg:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 50%,#dee2e6 100%);--glass:rgba(255,255,255,.8);--border:rgba(0,0,0,.1);--text:#212529;--text2:#6c757d;--accent:#007bff;--accent2:#0056b3;--shadow:0 8px 32px rgba(0,0,0,.1)}
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',sans-serif;background:var(--bg);color:var(--text);overflow-x:hidden;min-height:100vh;transition:all .3s}.loader{position:fixed;inset:0;background:var(--bg);display:flex;justify-content:center;align-items:center;z-index:9999;transition:opacity .5s}.loader.hidden{opacity:0;pointer-events:none}.spinner{width:60px;height:60px;border:4px solid var(--glass);border-top:4px solid var(--accent);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.particles{position:fixed;inset:0;pointer-events:none;z-index:-1}.particle{position:absolute;width:3px;height:3px;background:var(--accent);border-radius:50%;opacity:.6;animation:float 6s ease-in-out infinite}@keyframes float{0%,100%{transform:translateY(0);opacity:.6}50%{transform:translateY(-40px);opacity:.8}}.container{max-width:1400px;margin:0 auto;padding:0 20px}header{background:rgba(0,0,0,0.85);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:0 0 20px 20px;position:fixed;top:0;width:100%;z-index:1000;box-shadow:var(--shadow)}[data-theme="light"] header{background:rgba(255,255,255,0.9)}.header-content{display:flex;justify-content:space-between;align-items:center;padding:15px 0;flex-wrap:wrap;gap:15px}.logo{font-size:28px;font-weight:bold;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;cursor:pointer;transition:transform .3s}.logo:hover{transform:scale(1.1)}.theme-toggle{background:rgba(0,0,0,0.7);border:1px solid var(--border);border-radius:50%;width:45px;height:45px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s;backdrop-filter:blur(10px)}[data-theme="light"] .theme-toggle{background:rgba(255,255,255,0.8)}.theme-toggle:hover{transform:translateY(-2px);box-shadow:0 10px 25px rgba(255,215,0,.2)}.search-bar{display:flex;align-items:center;background:rgba(0,0,0,0.7);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:25px;padding:12px 20px;transition:all .3s;width:100%;max-width:400px;box-shadow:var(--shadow)}[data-theme="light"] .search-bar{background:rgba(255,255,255,0.8)}.search-bar:focus-within{border-color:var(--accent);transform:translateY(-2px)}.search-bar input{background:none;border:none;outline:none;color:var(--text);width:100%;font-size:16px}.search-bar input::placeholder{color:var(--text2)}.nav-buttons{display:flex;gap:15px;align-items:center;flex-wrap:wrap}.btn{padding:12px 24px;border:none;border-radius:25px;cursor:pointer;font-size:14px;font-weight:600;transition:all .3s;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;user-select:none}.btn:hover{transform:translateY(-3px)}.btn-primary{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#000}.btn-secondary{background:rgba(0,0,0,0.7);color:var(--text);border:1px solid var(--border);backdrop-filter:blur(10px)}[data-theme="light"] .btn-secondary{background:rgba(255,255,255,0.8)}.btn-secondary:hover{background:rgba(255,215,0,0.2);border-color:var(--accent)}.btn-small{padding:8px 16px;font-size:12px;border-radius:20px;flex:1;text-align:center}main{margin-top:120px;padding:40px 0}.hero{text-align:center;padding:80px 40px;background:var(--glass);backdrop-filter:blur(20px);border-radius:30px;border:1px solid var(--border);box-shadow:var(--shadow);margin-bottom:60px;position:relative;overflow:hidden}.hero::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,215,0,.1) 0%,transparent 70%);animation:rotate 20s linear infinite;pointer-events:none}@keyframes rotate{to{transform:rotate(360deg)}}@keyframes slideInBounce{0%{opacity:0;transform:translateX(100%)}50%{transform:translateX(-10%)}100%{opacity:1;transform:translateX(0)}}.notification-priority-high{border-left:4px solid #ff4757!important;background:rgba(255,71,87,.1)!important}.notification-priority-medium{border-left:4px solid #ffa502!important;background:rgba(255,165,2,.1)!important}.smart-notification-toast{backdrop-filter:blur(25px)!important;border:2px solid var(--accent)!important;box-shadow:0 15px 35px rgba(0,0,0,.3)!important}.hero h1{font-size:clamp(32px,5vw,48px);margin-bottom:20px;background:linear-gradient(135deg,var(--text),var(--text2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;position:relative;z-index:2}.hero p{font-size:clamp(16px,3vw,20px);color:var(--text2);max-width:600px;margin:0 auto 40px;position:relative;z-index:2;line-height:1.6}.hero-buttons{display:flex;gap:15px;justify-content:center;flex-wrap:wrap;position:relative;z-index:2}.categories{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin:60px 0}.category-card{background:var(--glass);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:20px;padding:30px 20px;text-align:center;cursor:pointer;transition:all .4s;box-shadow:var(--shadow)}.category-card:hover{transform:translateY(-10px);border-color:var(--accent)}.category-icon{font-size:40px;margin-bottom:15px;transition:transform .3s}.category-card:hover .category-icon{transform:scale(1.2)}.category-card h3{color:var(--accent);margin-bottom:10px;font-size:18px}.category-card p{color:var(--text2);font-size:14px}.products-section{margin:60px 0}.section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;flex-wrap:wrap;gap:20px}.section-title{font-size:clamp(24px,4vw,32px);color:var(--accent)}.products-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:25px}.product-card{background:var(--glass);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:25px;overflow:hidden;transition:all .4s;cursor:pointer;box-shadow:var(--shadow);position:relative}.product-card::before{content:'';position:absolute;inset:0;background:linear-gradient(45deg,transparent,rgba(255,215,0,.1),transparent);opacity:0;transition:opacity .3s;pointer-events:none}.product-card:hover::before{opacity:1}.product-card:hover{transform:translateY(-15px);border-color:var(--accent)}.product-image{width:100%;height:200px;background:linear-gradient(45deg,var(--glass),rgba(255,255,255,.05));display:flex;align-items:center;justify-content:center;font-size:60px;color:var(--text2)}.product-info{padding:20px}.product-title{font-size:18px;font-weight:600;margin-bottom:8px;color:var(--text)}.product-price{font-size:24px;font-weight:bold;color:var(--accent);margin-bottom:10px}.product-location{color:var(--text2);font-size:14px;margin-bottom:15px}.product-rating{display:flex;align-items:center;gap:5px;margin-bottom:15px}.stars{color:var(--accent)}.rating-text{color:var(--text2);font-size:14px}.product-actions{display:flex;gap:10px}.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.95);backdrop-filter:blur(25px);z-index:2000;animation:fadeIn .3s}.modal.show{display:flex;align-items:center;justify-content:center}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.modal-content{background:rgba(0,0,0,0.95);backdrop-filter:blur(30px);border:2px solid var(--border);border-radius:25px;width:90%;max-width:500px;max-height:80vh;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.8);animation:slideUp .3s}
[data-theme="light"] .modal-content{background:rgba(255,255,255,0.98);box-shadow:0 20px 60px rgba(0,0,0,.3)}.product-modal-content{max-width:800px;max-height:90vh;overflow-y:auto}@keyframes slideUp{from{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}.modal-header{padding:20px;border-bottom:2px solid var(--border);display:flex;justify-content:space-between;align-items:center;background:rgba(0,0,0,0.9);backdrop-filter:blur(20px)}
[data-theme="light"] .modal-header{background:rgba(255,255,255,0.95)}.close-btn{background:none;border:none;color:var(--text2);font-size:24px;cursor:pointer;transition:all .3s;width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center}.close-btn:hover{color:var(--accent);background:rgba(255,255,255,.1)}.product-modal-body{padding:20px;display:grid;grid-template-columns:1fr 1fr;gap:30px}.product-details{display:flex;flex-direction:column;gap:20px}.product-main-image{width:100%;height:250px;background:linear-gradient(45deg,var(--glass),rgba(255,255,255,.05));border-radius:15px;display:flex;align-items:center;justify-content:center;font-size:80px;color:var(--text2);border:1px solid var(--border)}.seller-reviews{background:var(--glass);backdrop-filter:blur(10px);border-radius:15px;padding:20px;border:1px solid var(--border)}.seller-info{display:flex;align-items:center;gap:15px;margin-bottom:20px}.seller-avatar{width:60px;height:60px;background:linear-gradient(135deg,var(--accent),var(--accent2));border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:24px;color:#000;font-weight:bold}.seller-details h4{color:var(--accent);margin-bottom:5px}.seller-rating{display:flex;align-items:center;gap:10px}.review-item{background:rgba(0,0,0,.2);backdrop-filter:blur(5px);border-radius:10px;padding:15px;margin-bottom:15px;border:1px solid rgba(255,255,255,.1)}.review-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.reviewer-name{color:var(--text2);font-size:14px}.review-stars{color:var(--accent)}.review-text{color:var(--text);line-height:1.5}.meetup-section{background:var(--glass);backdrop-filter:blur(10px);border-radius:15px;padding:20px;margin-top:20px;border:1px solid var(--border)}.meetup-options{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:15px}.location-select,.time-select{display:flex;flex-direction:column;gap:10px}.location-select label,.time-select label{color:var(--accent);font-weight:600}.location-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}.location-option,.time-option{background:var(--glass);backdrop-filter:blur(5px);border:1px solid var(--border);border-radius:8px;padding:10px;text-align:center;cursor:pointer;transition:all .3s;color:var(--text);user-select:none}.location-option:hover,.time-option:hover{border-color:var(--accent);background:rgba(255,215,0,.1)}.location-option.selected,.time-option.selected{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#000;border-color:var(--accent)}.time-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;max-height:200px;overflow-y:auto}.confirm-meetup-btn{margin-top:20px;width:100%}.chat-area{padding:20px;height:300px;overflow-y:auto;background:rgba(0,0,0,0.9);backdrop-filter:blur(20px)}
[data-theme="light"] .chat-area{background:rgba(255,255,255,0.95)}.message{margin-bottom:15px;padding:10px 15px;border-radius:15px;max-width:80%;backdrop-filter:blur(10px);animation:msgSlideIn .3s}@keyframes msgSlideIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.message.sent{background:linear-gradient(135deg,var(--accent),var(--accent2));color:#000;margin-left:auto}.message.received{background:var(--glass);color:var(--text);border:1px solid var(--border)}.chat-input{padding:20px;border-top:2px solid var(--border);background:rgba(0,0,0,0.9);backdrop-filter:blur(20px)}
[data-theme="light"] .chat-input{background:rgba(255,255,255,0.95)}.chat-input-field{width:100%;padding:12px;border:1px solid var(--border);border-radius:25px;background:var(--glass);backdrop-filter:blur(10px);color:var(--text);outline:none;transition:all .3s}.chat-input-field:focus{border-color:var(--accent)}.chat-actions{display:flex;gap:10px;margin-top:10px;align-items:center}.chat-action-btn{background:var(--glass);border:1px solid var(--border);border-radius:8px;padding:8px;cursor:pointer;transition:all .3s;backdrop-filter:blur(10px)}.chat-action-btn:hover{border-color:var(--accent)}.message-attachment{max-width:200px;border-radius:10px;margin-top:5px}.audio-message{background:var(--glass);padding:10px;border-radius:15px;margin-top:5px;display:flex;align-items:center;gap:10px}.wishlist-btn{background:none;border:none;font-size:18px;cursor:pointer;transition:all .3s;padding:5px;border-radius:50%}.wishlist-btn:hover{transform:scale(1.2)}.wishlist-btn.active{color:red}.filter-sort-controls{display:flex;gap:15px;align-items:center;flex-wrap:wrap}.filter-select{background:var(--glass);border:1px solid var(--border);border-radius:8px;padding:8px 12px;color:var(--text);backdrop-filter:blur(10px);outline:none;cursor:pointer}.filter-select:focus{border-color:var(--accent)}.notification-panel{position:fixed;top:100px;right:20px;width:350px;max-height:400px;background:rgba(0,0,0,0.85);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:15px;box-shadow:var(--shadow);z-index:1500;overflow-y:auto;transition:all .3s;transform:translateX(400px);opacity:0}[data-theme="light"] .notification-panel{background:rgba(255,255,255,0.9)}.notification-panel.show{transform:translateX(0);opacity:1}.notification-header{padding:15px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;background:rgba(0,0,0,0.3);backdrop-filter:blur(10px)}[data-theme="light"] .notification-header{background:rgba(255,255,255,0.5)}.notification-item{padding:15px;border-bottom:1px solid rgba(255,255,255,.2);cursor:pointer;transition:all .3s;background:rgba(0,0,0,0.3);margin-bottom:2px}[data-theme="light"] .notification-item{background:rgba(255,255,255,0.7);border-bottom:1px solid rgba(0,0,0,.1)}.notification-item:hover{background:rgba(255,215,0,.2)}.notification-item.unread{border-left:4px solid var(--accent);background:rgba(255,215,0,0.1)}.notification-badge{position:absolute;top:-5px;right:-5px;background:var(--accent);color:#000;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:bold}@media (max-width:768px){.header-content{flex-direction:column;align-items:stretch}.nav-buttons{justify-content:center}.hero{padding:60px 20px}.products-grid{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px}.product-modal-body{grid-template-columns:1fr;gap:20px}.meetup-options{grid-template-columns:1fr}.categories{grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px}.category-card{padding:20px 15px}}@media (max-width:480px){.btn{padding:10px 20px;font-size:13px}.search-bar{padding:10px 15px}main{margin-top:140px}}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:var(--glass)}::-webkit-scrollbar-thumb{background:var(--accent);border-radius:4px}::-webkit-scrollbar-thumb:hover{background:var(--accent2)}
</style>
</head>
<body data-theme="dark">
<div id="loader" class="loader"><div class="spinner"></div><div style="font-size:24px;font-weight:bold;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-top:20px;animation:pulse 2s ease-in-out infinite">ModWapp</div></div>
<div class="particles" id="particles"></div>
<header><div class="container"><div class="header-content"><div class="logo" onclick="scrollToTop()">ModWapp</div><div class="search-bar"><input type="text" placeholder="Search for items..." id="searchInput"><span style="color:var(--text2);margin-left:10px;cursor:pointer" onclick="performSearch()">🔍</span></div><div class="nav-buttons"><button class="theme-toggle" onclick="toggleTheme()" title="Toggle Theme"><span id="theme-icon">🌙</span></button><button class="btn btn-secondary" style="position:relative" onclick="toggleNotifications()">🔔<span class="notification-badge" id="notificationBadge" style="display:none">3</span></button><button class="btn btn-secondary" onclick="openUserProfile('current-user')">My Profile</button><button class="btn btn-secondary" onclick="toggleWishlist()"><span id="wishlist-icon">❤️</span><span id="wishlist-count">(0)</span></button><button class="btn btn-secondary" onclick="scrollToSection('exchange-section')">Exchange</button><button class="btn btn-primary" onclick="alert('Sell Item feature coming soon!')">Sell Item</button></div></div></div></header>
<main><div class="container"><section class="hero"><h1>University Marketplace</h1><p>Buy, sell, and exchange second-hand items with fellow students. Safe, convenient, and community-driven.</p><div class="hero-buttons"><button class="btn btn-primary" onclick="scrollToSection('buy-section')">Start Shopping</button><button class="btn btn-secondary" onclick="scrollToSection('exchange-section')">Find Exchange</button></div></section>
<section class="categories"><div class="category-card" onclick="filterProducts('textbooks')"><div class="category-icon">📚</div><h3>Textbooks</h3><p>Academic books and study materials</p></div><div class="category-card" onclick="filterProducts('electronics')"><div class="category-icon">💻</div><h3>Electronics</h3><p>Laptops, phones, and gadgets</p></div><div class="category-card" onclick="filterProducts('clothing')"><div class="category-icon">👕</div><h3>Clothing</h3><p>Fashion and accessories</p></div><div class="category-card" onclick="filterProducts('dorm')"><div class="category-icon">🏠</div><h3>Dorm Items</h3><p>Furniture and home essentials</p></div><div class="category-card" onclick="filterProducts('entertainment')"><div class="category-icon">🎮</div><h3>Entertainment</h3><p>Games, instruments, and hobbies</p></div><div class="category-card" onclick="filterProducts('transportation')"><div class="category-icon">🚲</div><h3>Transportation</h3><p>Bikes, scooters, and more</p></div></section>
<section class="products-section" id="buy-section"><div class="section-header"><h2 class="section-title">Featured Items for Sale</h2><div class="filter-sort-controls"><select class="filter-select" id="categoryFilter" onchange="applyFilters()"><option value="all">All Categories</option><option value="electronics">Electronics</option><option value="textbooks">Textbooks</option><option value="clothing">Clothing</option><option value="dorm">Dorm Items</option><option value="entertainment">Entertainment</option><option value="transportation">Transportation</option></select><select class="filter-select" id="priceFilter" onchange="applyFilters()"><option value="all">All Prices</option><option value="0-1000">฿0 - ฿1,000</option><option value="1000-10000">฿1,000 - ฿10,000</option><option value="10000-30000">฿10,000 - ฿30,000</option><option value="30000+">฿30,000+</option></select><select class="filter-select" id="sortBy" onchange="applyFilters()"><option value="newest">Newest First</option><option value="price-low">Price: Low to High</option><option value="price-high">Price: High to Low</option><option value="rating">Highest Rated</option><option value="distance">Nearest Location</option></select><button class="btn btn-secondary" onclick="clearFilters()">Clear</button></div></div><div class="products-grid"><div class="product-card" data-category="electronics"><div class="product-image">📱</div><div class="product-info"><h3 class="product-title">iPhone 13 Pro</h3><div class="product-price">฿28,000</div><div class="product-location">📍 Main Campus</div><div class="product-rating"><span class="stars">⭐⭐⭐⭐⭐</span><span class="rating-text">(4.8) • 24 reviews</span></div><div class="product-actions"><button class="btn btn-primary btn-small" onclick="openChat('iPhone 13 Pro','Sarah M.')">Chat</button><button class="btn btn-secondary btn-small" onclick="openProductDetails('iPhone 13 Pro','Sarah M.','📱','฿28,000','Main Campus',4.8,24)">Details</button><button class="btn btn-secondary btn-small" onclick="openUserProfile('sarah-m')">Profile</button><button class="wishlist-btn" onclick="toggleItemWishlist(this, 'iphone-13-pro')" data-item="iphone-13-pro">🤍</button></div></div></div>
<div class="product-card" data-category="textbooks"><div class="product-image">📖</div><div class="product-info"><h3 class="product-title">Calculus Textbook</h3><div class="product-price">฿1,500</div><div class="product-location">📍 Science Building</div><div class="product-rating"><span class="stars">⭐⭐⭐⭐⭐</span><span class="rating-text">(5.0) • 12 reviews</span></div><div class="product-actions"><button class="btn btn-primary btn-small" onclick="openChat('Calculus Textbook','Mike K.')">Chat</button><button class="btn btn-secondary btn-small" onclick="openProductDetails('Calculus Textbook','Mike K.','📖','฿1,500','Science Building',5.0,12)">Details</button><button class="btn btn-secondary btn-small" onclick="openUserProfile('mike-k')">Profile</button><button class="wishlist-btn" onclick="toggleItemWishlist(this, 'calculus-textbook')" data-item="calculus-textbook">🤍</button></div></div></div>
<div class="product-card" data-category="electronics"><div class="product-image">💻</div><div class="product-info"><h3 class="product-title">MacBook Air M2</h3><div class="product-price">฿42,000</div><div class="product-location">📍 Library Cafe</div><div class="product-rating"><span class="stars">⭐⭐⭐⭐⭐</span><span class="rating-text">(4.9) • 18 reviews</span></div><div class="product-actions"><button class="btn btn-primary btn-small" onclick="openChat('MacBook Air M2','Alex J.')">Chat</button><button class="btn btn-secondary btn-small" onclick="openProductDetails('MacBook Air M2','Alex J.','💻','฿42,000','Library Cafe',4.9,18)">Details</button><button class="btn btn-secondary btn-small" onclick="openUserProfile('alex-j')">Profile</button><button class="wishlist-btn" onclick="toggleItemWishlist(this, 'macbook-air-m2')" data-item="macbook-air-m2">🤍</button></div></div></div>
<div class="product-card" data-category="transportation"><div class="product-image">🚲</div><div class="product-info"><h3 class="product-title">Mountain Bike</h3><div class="product-price">฿10,500</div><div class="product-location">📍 Student Parking</div><div class="product-rating"><span class="stars">⭐⭐⭐⭐</span><span class="rating-text">(4.6) • 8 reviews</span></div><div class="product-actions"><button class="btn btn-primary btn-small" onclick="openChat('Mountain Bike','Emma L.')">Chat</button><button class="btn btn-secondary btn-small" onclick="openProductDetails('Mountain Bike','Emma L.','🚲','฿10,500','Student Parking',4.6,8)">Details</button><button class="btn btn-secondary btn-small" onclick="openUserProfile('emma-l')">Profile</button><button class="wishlist-btn" onclick="toggleItemWishlist(this, 'mountain-bike')" data-item="mountain-bike">🤍</button></div></div></div></div></section>
<section class="products-section" id="exchange-section"><div class="section-header"><h2 class="section-title">Exchange Offers</h2><button class="btn btn-secondary" onclick="alert('View All exchanges coming soon!')">View All</button></div><div class="products-grid"><div class="product-card" data-category="entertainment" style="border-color:rgba(0,255,127,.3)"><div class="product-image">🎮</div><div class="product-info"><h3 class="product-title">PS5 Controller</h3><div class="product-price" style="color:#00FF7F">Want: Nintendo Switch Games</div><div class="product-location">📍 Engineering Building</div><div class="product-rating"><span class="stars">⭐⭐⭐⭐⭐</span><span class="rating-text">(4.9) • 15 reviews</span></div><div class="product-actions"><button class="btn btn-primary btn-small" onclick="openChat('PS5 Controller Exchange','Tom R.')">Chat</button><button class="btn btn-secondary btn-small" onclick="openProductDetails('PS5 Controller','Tom R.','🎮','Want: Nintendo Switch Games','Engineering Building',4.9,15,true)">Details</button></div></div></div>
<div class="product-card" data-category="textbooks" style="border-color:rgba(0,255,127,.3)"><div class="product-image">📚</div><div class="product-info"><h3 class="product-title">Physics Textbooks (3 Books)</h3><div class="product-price" style="color:#00FF7F">Want: Chemistry Lab Manual</div><div class="product-location">📍 Science Library</div><div class="product-rating"><span class="stars">⭐⭐⭐⭐⭐</span><span class="rating-text">(5.0) • 22 reviews</span></div><div class="product-actions"><button class="btn btn-primary btn-small" onclick="openChat('Physics Books Exchange','Lisa K.')">Chat</button><button class="btn btn-secondary btn-small" onclick="openProductDetails('Physics Textbooks (3 Books)','Lisa K.','📚','Want: Chemistry Lab Manual','Science Library',5.0,22,true)">Details</button></div></div></div>
<div class="product-card" data-category="clothing" style="border-color:rgba(0,255,127,.3)"><div class="product-image">👕</div><div class="product-info"><h3 class="product-title">University Hoodie (Size L)</h3><div class="product-price" style="color:#00FF7F">Want: Size M Hoodie</div><div class="product-location">📍 Student Center</div><div class="product-rating"><span class="stars">⭐⭐⭐⭐</span><span class="rating-text">(4.7) • 9 reviews</span></div><div class="product-actions"><button class="btn btn-primary btn-small" onclick="openChat('Hoodie Exchange','Jake M.')">Chat</button><button class="btn btn-secondary btn-small" onclick="openProductDetails('University Hoodie (Size L)','Jake M.','👕','Want: Size M Hoodie','Student Center',4.7,9,true)">Details</button></div></div></div>
<div class="product-card" data-category="electronics" style="border-color:rgba(0,255,127,.3)"><div class="product-image">🎧</div><div class="product-info"><h3 class="product-title">AirPods Pro</h3><div class="product-price" style="color:#00FF7F">Want: Gaming Headset</div><div class="product-location">📍 IT Building</div><div class="product-rating"><span class="stars">⭐⭐⭐⭐⭐</span><span class="rating-text">(4.8) • 11 reviews</span></div><div class="product-actions"><button class="btn btn-primary btn-small" onclick="openChat('AirPods Exchange','Amy C.')">Chat</button><button class="btn btn-secondary btn-small" onclick="openProductDetails('AirPods Pro','Amy C.','🎧','Want: Gaming Headset','IT Building',4.8,11,true)">Details</button></div></div></div></div></section></div></main>
<div class="notification-panel" id="notificationPanel"><div class="notification-header"><h4>Notifications</h4><button class="close-btn" onclick="toggleNotifications()">&times;</button></div><div id="notificationList"><div class="notification-item unread"><div style="font-weight:bold;color:var(--accent);margin-bottom:8px;font-size:15px">New Message</div><div style="color:var(--text);line-height:1.4;margin-bottom:8px">Sarah M. sent you a message about iPhone 13 Pro</div><div style="font-size:11px;color:var(--text2);opacity:0.7">2 minutes ago</div></div><div class="notification-item unread"><div style="font-weight:bold;color:var(--accent);margin-bottom:8px;font-size:15px">Meetup Confirmed</div><div style="color:var(--text);line-height:1.4;margin-bottom:8px">Your meetup with Mike K. is scheduled for today at 3 PM</div><div style="font-size:11px;color:var(--text2);opacity:0.7">1 hour ago</div></div><div class="notification-item unread"><div style="font-weight:bold;color:var(--accent);margin-bottom:8px;font-size:15px">New Item Match</div><div style="color:var(--text);line-height:1.4;margin-bottom:8px">Found a Chemistry Lab Manual you're looking for!</div><div style="font-size:11px;color:var(--text2);opacity:0.7">3 hours ago</div></div></div></div>
<div id="wishlistModal" class="modal"><div class="modal-content"><div class="modal-header"><h3>My Wishlist ❤️</h3><button class="close-btn" onclick="toggleWishlist()">&times;</button></div><div style="padding:20px"><div id="wishlistItems"><p style="text-align:center;color:var(--text2);padding:40px">Your wishlist is empty. Start adding items you love!</p></div></div></div></div>
<div id="chatModal" class="modal"><div class="modal-content"><div class="modal-header"><h3 id="chatTitle">Chat with Seller</h3><button class="close-btn" onclick="closeChat()">&times;</button></div><div class="chat-area" id="chatArea"><div class="message received"><strong>Seller:</strong> Hi! Thanks for your interest in my item. How can I help you?</div><div class="message sent"><strong>You:</strong> Hi! Is this item still available?</div><div class="message received"><strong>Seller:</strong> Yes, it's still available! Would you like to meet up to see it?</div></div><div class="chat-input"><input type="text" class="chat-input-field" placeholder="Type your message..." id="chatMessageInput" onkeypress="handleChatInput(event)"><div class="chat-actions"><button class="chat-action-btn" onclick="triggerFileInput('image')" title="Send Image">📷</button><button class="chat-action-btn" onclick="triggerFileInput('file')" title="Send File">📎</button><button class="chat-action-btn" onclick="toggleVoiceRecording()" title="Voice Message" id="voiceBtn">🎤</button></div><input type="file" id="imageInput" accept="image/*" style="display:none" onchange="sendFile(this, 'image')"><input type="file" id="fileInput" style="display:none" onchange="sendFile(this, 'file')"></div></div></div>
<div id="productModal" class="modal"><div class="modal-content product-modal-content"><div class="modal-header"><h3>Product Details</h3><button class="close-btn" onclick="closeProductDetails()">&times;</button></div><div class="product-modal-body"><div class="product-details"><div id="productMainImage" class="product-main-image">📱</div><h2 id="productName" style="color:var(--accent)">iPhone 13 Pro</h2><p id="productPrice" style="font-size:24px;font-weight:bold;color:var(--accent)">฿28,000</p><p id="productLocation" style="color:var(--text2)">📍 Main Campus</p><div class="meetup-section"><h4 style="color:var(--accent);margin-bottom:15px">Schedule Meetup</h4><div class="meetup-options"><div class="location-select"><label>Choose Location:</label><div class="location-grid" id="locationGrid"><div class="location-option" onclick="selectLocation(this)" data-location="S2">S2</div><div class="location-option" onclick="selectLocation(this)" data-location="S3">S3</div><div class="location-option" onclick="selectLocation(this)" data-location="S4">S4</div><div class="location-option" onclick="selectLocation(this)" data-location="N10">N10</div><div class="location-option" onclick="selectLocation(this)" data-location="N11">N11</div><div class="location-option" onclick="selectLocation(this)" data-location="N12">N12</div></div></div><div class="time-select"><label>Choose Time:</label><div class="time-grid" id="timeGrid"></div></div></div><button class="btn btn-primary confirm-meetup-btn" onclick="confirmMeetup()">Confirm Meetup</button></div></div><div class="seller-reviews"><div class="seller-info"><div id="sellerAvatar" class="seller-avatar">S</div><div class="seller-details"><h4 id="sellerName">Sarah M.</h4><div class="seller-rating"><span id="sellerStars" class="stars">⭐⭐⭐⭐⭐</span><span id="sellerRating" class="rating-text">(4.8) • 24 reviews</span></div></div></div><h4 style="color:var(--accent);margin-bottom:15px">Customer Reviews</h4><div id="reviewsList"></div></div></div></div></div>
<div id="userProfileModal" class="modal"><div class="modal-content" style="max-width:900px;max-height:90vh;overflow-y:auto"><div class="modal-header"><h3 id="profileTitle">User Profile</h3><button class="close-btn" onclick="closeUserProfile()">&times;</button></div><div id="profileContent" style="padding:0"></div></div></div>

<script>
let selectedLocation='',selectedTime='',wishlist=new Set(),isRecording=false;
const userProfiles={
'current-user':{
name:'You',
avatar:'👤',
rating:4.9,
reviews:45,
memberSince:'January 2024',
badges:['🏆 Trusted Seller','⚡ Fast Responder','🎯 Top Rated'],
bio:'Engineering student passionate about tech. Selling quality items at fair prices!',
stats:{totalSales:23,activeListings:5,responseTime:'< 2 hours'},
items:[
{name:'iPhone 13 Pro',price:28000,category:'electronics',status:'active',emoji:'📱'},
{name:'Study Lamp',price:800,category:'dorm',status:'sold',emoji:'💡'},
{name:'Chemistry Textbook',price:2200,category:'textbooks',status:'active',emoji:'📚'},
{name:'Gaming Mouse',price:1500,category:'electronics',status:'active',emoji:'🖱️'},
{name:'Yoga Mat',price:600,category:'fitness',status:'active',emoji:'🧘'}
]
},
'sarah-m':{
name:'Sarah M.',
avatar:'🧑‍💼',
rating:4.8,
reviews:24,
memberSince:'September 2023',
badges:['🏆 Trusted Seller','⚡ Fast Responder'],
bio:'Business major with love for technology. Always honest about item conditions!',
stats:{totalSales:18,activeListings:3,responseTime:'< 1 hour'},
items:[
{name:'iPhone 13 Pro',price:28000,category:'electronics',status:'active',emoji:'📱'},
{name:'Business Textbooks Set',price:3500,category:'textbooks',status:'sold',emoji:'📖'},
{name:'Desk Organizer',price:450,category:'dorm',status:'active',emoji:'📋'}
]
},
'mike-k':{
name:'Mike K.',
avatar:'👨‍🔬',
rating:5.0,
reviews:12,
memberSince:'March 2024',
badges:['⚡ Fast Responder','📚 Book Expert'],
bio:'Math/Physics student. Specialized in academic books and study materials.',
stats:{totalSales:8,activeListings:4,responseTime:'< 30 minutes'},
items:[
{name:'Calculus Textbook',price:1500,category:'textbooks',status:'active',emoji:'📖'},
{name:'Physics Lab Manual',price:1200,category:'textbooks',status:'active',emoji:'🔬'},
{name:'Scientific Calculator',price:800,category:'electronics',status:'sold',emoji:'🧮'}
]
},
'alex-j':{
name:'Alex J.',
avatar:'💻',
rating:4.9,
reviews:18,
memberSince:'August 2023',
badges:['🏆 Trusted Seller','💻 Tech Expert','⚡ Fast Responder'],
bio:'Computer Science student. Expert in laptops and gaming gear. All items tested before sale!',
stats:{totalSales:15,activeListings:2,responseTime:'< 45 minutes'},
items:[
{name:'MacBook Air M2',price:42000,category:'electronics',status:'active',emoji:'💻'},
{name:'Gaming Keyboard',price:2800,category:'electronics',status:'sold',emoji:'⌨️'},
{name:'External Monitor',price:8500,category:'electronics',status:'active',emoji:'🖥️'}
]
},
'emma-l':{
name:'Emma L.',
avatar:'🚴‍♀️',
rating:4.6,
reviews:8,
memberSince:'November 2023',
badges:['🚲 Sports Gear'],
bio:'Sports enthusiast and outdoor lover. Selling quality sports equipment and outdoor gear.',
stats:{totalSales:6,activeListings:3,responseTime:'< 3 hours'},
items:[
{name:'Mountain Bike',price:10500,category:'transportation',status:'active',emoji:'🚲'},
{name:'Hiking Backpack',price:1800,category:'outdoor',status:'active',emoji:'🎒'},
{name:'Running Shoes',price:2200,category:'clothing',status:'sold',emoji:'👟'}
]
}
};
const reviews=[
{text:"Fast delivery and great communication! Item was exactly as described.",rating:5},
{text:"Very reliable seller. Item was in perfect condition.",rating:5},
{text:"Quick response and smooth transaction. Highly recommended!",rating:5},
{text:"Good quality item but took a bit longer to arrange meetup.",rating:4},
{text:"Excellent seller! Very professional and trustworthy.",rating:5}
];
const names=["John D.","Maria S.","David L.","Anna K.","Chris P."];
const times=['08:00-09:00','09:00-10:00','10:00-11:00','11:00-12:00','12:00-13:00','13:00-14:00','14:00-15:00','15:00-16:00','16:00-17:00','17:00-18:00','18:00-19:00','19:00-20:00'];
const products=[
{id:'iphone-13-pro',name:'iPhone 13 Pro',price:28000,category:'electronics',rating:4.8,location:'Main Campus'},
{id:'calculus-textbook',name:'Calculus Textbook',price:1500,category:'textbooks',rating:5.0,location:'Science Building'},
{id:'macbook-air-m2',name:'MacBook Air M2',price:42000,category:'electronics',rating:4.9,location:'Library Cafe'},
{id:'mountain-bike',name:'Mountain Bike',price:10500,category:'transportation',rating:4.6,location:'Student Parking'}
];
let notificationQueue=[];
const smartNotifications=[
{type:'interest',title:'Someone is interested in your item! 🔥',message:'User Alex J. is asking about your MacBook Air M2',time:'2 minutes ago',icon:'💬',priority:'high'},
{type:'price_drop',title:'Price Drop Alert! 💰',message:'iPhone 13 Pro in your wishlist dropped to ฿25,000',time:'15 minutes ago',icon:'📉',priority:'medium'},
{type:'meetup',title:'Meetup Reminder ⏰',message:'Your meetup with Sarah M. is in 30 minutes at S2',time:'30 minutes',icon:'📍',priority:'high'},
{type:'file_received',title:'File Received 📎',message:'Emma L. sent you product photos for Mountain Bike',time:'1 hour ago',icon:'📸',priority:'medium'}
];
document.addEventListener('DOMContentLoaded',()=>{
setTimeout(()=>{
const l=document.getElementById('loader');l.classList.add('hidden');
setTimeout(()=>l.style.display='none',500)
},1500);
createParticles();
document.getElementById('searchInput').addEventListener('keypress',e=>{if(e.key==='Enter')performSearch()});
initAnimations();showNotificationBadge();initWishlist()
});
function createParticles(){
const p=document.getElementById('particles');
for(let i=0;i<20;i++){
const d=document.createElement('div');d.className='particle';
d.style.left=Math.random()*100+'%';d.style.top=Math.random()*100+'%';
d.style.animationDelay=Math.random()*6+'s';p.appendChild(d)
}
}
function toggleTheme(){
const b=document.body,t=document.getElementById('theme-icon');
if(b.getAttribute('data-theme')==='dark'){b.setAttribute('data-theme','light');t.textContent='☀️'}
else{b.setAttribute('data-theme','dark');t.textContent='🌙'}
}
function scrollToTop(){window.scrollTo({top:0,behavior:'smooth'})}
function scrollToSection(s){const e=document.getElementById(s);if(e)e.scrollIntoView({behavior:'smooth'})}
function performSearch(){const i=document.getElementById('searchInput'),q=i.value.trim();if(q)alert(`Searching for: "${q}"`)}
function filterProducts(c){alert(`Filtering by category: ${c}`)}
function openChat(i,s){
const t=document.getElementById('chatTitle'),m=document.getElementById('chatModal');
t.textContent=`Chat about ${i} with ${s}`;m.style.display='flex';m.classList.add('show');
document.body.style.overflow='hidden';
setTimeout(()=>{document.getElementById('chatMessageInput').focus()},100)
}
function closeChat(){
const m=document.getElementById('chatModal');m.classList.remove('show');
setTimeout(()=>{m.style.display='none';document.body.style.overflow='auto'},300)
}
function handleChatInput(e){
if(e.key==='Enter'){
const i=e.target,m=i.value.trim();
if(m){addChatMessage('You',m,true);i.value='';
setTimeout(()=>{
const r=['Thanks for your message!','That sounds great!','I\'m available this afternoon.','Perfect! See you there.'];
addChatMessage('Seller',r[Math.floor(Math.random()*r.length)],false)
},1000)}
}
}
function toggleItemWishlist(btn,itemId){
if(wishlist.has(itemId)){wishlist.delete(itemId);btn.textContent='🤍';btn.classList.remove('active')}
else{wishlist.add(itemId);btn.textContent='❤️';btn.classList.add('active');showNotification('Added to wishlist! ❤️','Item saved to your favorites')}
updateWishlistCount()
}
function toggleWishlist(){
const modal=document.getElementById('wishlistModal');
if(modal.style.display==='flex'){modal.style.display='none';document.body.style.overflow='auto'}
else{updateWishlistDisplay();modal.style.display='flex';document.body.style.overflow='hidden'}
}
function updateWishlistCount(){document.getElementById('wishlist-count').textContent=`(${wishlist.size})`}
function updateWishlistDisplay(){
const container=document.getElementById('wishlistItems');
if(wishlist.size===0){container.innerHTML='<p style="text-align:center;color:var(--text2);padding:40px">Your wishlist is empty. Start adding items you love!</p>';return}
container.innerHTML='';
wishlist.forEach(itemId=>{
const product=products.find(p=>p.id===itemId);
if(product){
const item=document.createElement('div');
item.style.cssText='display:flex;align-items:center;padding:15px;border:1px solid var(--border);border-radius:10px;margin-bottom:10px;background:var(--glass)';
item.innerHTML=`<div style="font-size:24px;margin-right:15px">📱</div><div style="flex:1"><h4>${product.name}</h4><p>฿${product.price.toLocaleString()}</p></div><button onclick="removeFromWishlist('${itemId}')" style="background:none;border:none;color:red;font-size:18px;cursor:pointer">🗑️</button>`;
container.appendChild(item)
}
})
}
function removeFromWishlist(itemId){
wishlist.delete(itemId);updateWishlistCount();updateWishlistDisplay();
const btn=document.querySelector(`[data-item="${itemId}"]`);
if(btn){btn.textContent='🤍';btn.classList.remove('active')}
}
function applyFilters(){
const category=document.getElementById('categoryFilter').value;
const cards=document.querySelectorAll('.product-card');
cards.forEach(card=>{
let show=true;
if(category!=='all'&&card.getAttribute('data-category')!==category)show=false;
card.style.display=show?'block':'none'
});
showNotification('Filters Applied',`Showing results for ${category} category`)
}
function clearFilters(){
document.getElementById('categoryFilter').value='all';
document.getElementById('priceFilter').value='all';
document.getElementById('sortBy').value='newest';
document.querySelectorAll('.product-card').forEach(card=>card.style.display='block')
}
function toggleNotifications(){
const panel=document.getElementById('notificationPanel');
if(panel.classList.contains('show')){panel.classList.remove('show')}
else{panel.classList.add('show');document.getElementById('notificationBadge').style.display='none'}
}
function showNotificationBadge(){
document.getElementById('notificationBadge').style.display='block';
startSmartNotifications()
}
function startSmartNotifications(){
setTimeout(()=>addSmartNotification('interest'),3000);
setTimeout(()=>addSmartNotification('price_drop'),8000);
setTimeout(()=>addSmartNotification('meetup'),15000)
}
function addSmartNotification(type){
const notification=smartNotifications.find(n=>n.type===type);
if(!notification)return;
notificationQueue.push({...notification,id:Date.now()});
updateNotificationBadge();updateNotificationPanel();
showInAppNotification(notification)
}
function showInAppNotification(notification){
const toast=document.createElement('div');
const theme=document.body.getAttribute('data-theme');
toast.style.cssText=`position:fixed;top:120px;right:20px;background:${theme==='light'?'rgba(255,255,255,0.95)':'rgba(0,0,0,0.9)'};color:${theme==='light'?'#000':'#fff'};border:2px solid var(--accent);border-radius:15px;padding:20px;backdrop-filter:blur(20px);z-index:9999;animation:slideInBounce 0.5s;min-width:320px;max-width:400px;cursor:pointer;transform:translateX(100%)`;
toast.innerHTML=`<div style="display:flex;align-items:flex-start;gap:15px"><div style="font-size:24px">${notification.icon}</div><div style="flex:1"><div style="font-weight:bold;font-size:16px;margin-bottom:8px;color:var(--accent)">${notification.title}</div><div style="font-size:14px;line-height:1.4;opacity:0.9;margin-bottom:8px">${notification.message}</div><div style="font-size:12px;opacity:0.6">${notification.time}</div></div><button onclick="this.parentElement.parentElement.remove()" style="background:none;border:none;color:var(--text2);font-size:18px;cursor:pointer">×</button></div>`;
toast.onclick=(e)=>{if(e.target.tagName!=='BUTTON'){handleNotificationClick(notification);toast.remove()}};
document.body.appendChild(toast);
requestAnimationFrame(()=>{toast.style.transform='translateX(0)'});
setTimeout(()=>{if(document.body.contains(toast)){toast.style.transform='translateX(100%)';setTimeout(()=>{if(document.body.contains(toast))toast.remove()},300)}},6000)
}
function handleNotificationClick(notification){
switch(notification.type){
case 'interest':openChat('MacBook Air M2','Alex J.');break;
case 'price_drop':scrollToSection('buy-section');break;
case 'meetup':alert('📍 Meetup Location: S2\n⏰ Time: In 30 minutes\n👤 Meeting: Sarah M.');break;
case 'file_received':alert('📸 File Preview: Bike Photos');break
}
}
function updateNotificationBadge(){
const badge=document.getElementById('notificationBadge');
const unreadCount=notificationQueue.filter(n=>!n.read).length+3;
badge.textContent=unreadCount;badge.style.display=unreadCount>0?'block':'none'
}
function updateNotificationPanel(){
const panel=document.getElementById('notificationList');
let html='';
notificationQueue.forEach(notification=>{
html+=`<div class="notification-item ${!notification.read?'unread':''}" onclick="handleNotificationClick({type:'${notification.type}'})"><div style="font-weight:bold;color:var(--accent);margin-bottom:8px;font-size:15px;display:flex;align-items:center;gap:8px"><span style="font-size:18px">${notification.icon}</span>${notification.title}</div><div style="color:var(--text);line-height:1.4;margin-bottom:8px">${notification.message}</div><div style="font-size:11px;color:var(--text2);opacity:0.7">${notification.time}</div></div>`
});
html+=`<div class="notification-item unread"><div style="font-weight:bold;color:var(--accent);margin-bottom:8px;font-size:15px">New Message</div><div style="color:var(--text);line-height:1.4;margin-bottom:8px">Sarah M. sent you a message about iPhone 13 Pro</div><div style="font-size:11px;color:var(--text2);opacity:0.7">2 minutes ago</div></div><div class="notification-item unread"><div style="font-weight:bold;color:var(--accent);margin-bottom:8px;font-size:15px">Meetup Confirmed</div><div style="color:var(--text);line-height:1.4;margin-bottom:8px">Your meetup with Mike K. is scheduled for today at 3 PM</div><div style="font-size:11px;color:var(--text2);opacity:0.7">1 hour ago</div></div><div class="notification-item unread"><div style="font-weight:bold;color:var(--accent);margin-bottom:8px;font-size:15px">New Item Match</div><div style="color:var(--text);line-height:1.4;margin-bottom:8px">Found a Chemistry Lab Manual you're looking for!</div><div style="font-size:11px;color:var(--text2);opacity:0.7">3 hours ago</div></div>`;
panel.innerHTML=html
}
function triggerFileInput(type){document.getElementById(type==='image'?'imageInput':'fileInput').click()}
function sendFile(input,type){
const file=input.files[0];if(!file)return;
const fileName=file.name;
if(type==='image'){
const reader=new FileReader();
reader.onload=e=>{
const msg=document.createElement('div');msg.className='message sent';
msg.innerHTML=`<strong>You:</strong> Sent an image<br><img src="${e.target.result}" class="message-attachment" style="border-radius:8px;max-width:200px;margin-top:5px">`;
document.getElementById('chatArea').appendChild(msg);
document.getElementById('chatArea').scrollTop=document.getElementById('chatArea').scrollHeight;
setTimeout(()=>addChatMessage('Seller','Nice photo! Thanks for sharing. 📸',false),1500)
};reader.readAsDataURL(file)
}
input.value=''
}
function toggleVoiceRecording(){
const btn=document.getElementById('voiceBtn');
if(!isRecording){
isRecording=true;btn.textContent='⏹️';btn.style.background='red';
setTimeout(()=>{
isRecording=false;btn.textContent='🎤';btn.style.background='';
const audioMsg=document.createElement('div');audioMsg.className='message sent';
audioMsg.innerHTML=`<strong>You:</strong> Sent voice message<div class="audio-message"><button>▶️</button><span>Voice message (0:03)</span></div>`;
document.getElementById('chatArea').appendChild(audioMsg);
document.getElementById('chatArea').scrollTop=document.getElementById('chatArea').scrollHeight;
setTimeout(()=>addChatMessage('Seller','Thanks for the voice message!',false),2000)
},3000)
}
}
function showNotification(title,message){
const toast=document.createElement('div');
toast.style.cssText='position:fixed;top:120px;right:20px;background:rgba(0,0,0,0.9);color:#fff;border:2px solid var(--accent);border-radius:15px;padding:20px;backdrop-filter:blur(20px);z-index:9999;min-width:300px';
const theme=document.body.getAttribute('data-theme');
if(theme==='light'){toast.style.background='rgba(255,255,255,0.95)';toast.style.color='#000'}
toast.innerHTML=`<div style="font-weight:bold;font-size:16px;margin-bottom:8px;color:var(--accent)">${title}</div><div style="font-size:14px;line-height:1.4;opacity:0.9">${message}</div>`;
document.body.appendChild(toast);
setTimeout(()=>{if(document.body.contains(toast))document.body.removeChild(toast)},4000)
}
function initWishlist(){if('Notification' in window&&Notification.permission!=='granted'&&Notification.permission!=='denied')Notification.requestPermission()}
function addChatMessage(s,m,sent){
const c=document.getElementById('chatArea'),d=document.createElement('div');
d.className=`message ${sent?'sent':'received'}`;d.innerHTML=`<strong>${s}:</strong> ${m}`;
c.appendChild(d);c.scrollTop=c.scrollHeight
}
function openProductDetails(n,s,e,p,l,r,rc){
document.getElementById('productName').textContent=n;
document.getElementById('productPrice').textContent=p;
document.getElementById('productLocation').textContent=`📍 ${l}`;
document.getElementById('productMainImage').textContent=e;
document.getElementById('sellerName').textContent=s;
document.getElementById('sellerAvatar').textContent=s.charAt(0);
document.getElementById('sellerStars').textContent='⭐'.repeat(Math.floor(r));
document.getElementById('sellerRating').textContent=`(${r}) • ${rc} reviews`;
generateReviews(rc);generateTimeSlots();resetSelections();
const m=document.getElementById('productModal');
m.style.display='flex';m.classList.add('show');document.body.style.overflow='hidden'
}
function closeProductDetails(){
const m=document.getElementById('productModal');m.classList.remove('show');
setTimeout(()=>{m.style.display='none';document.body.style.overflow='auto'},300)
}
function resetSelections(){
selectedLocation=selectedTime='';
document.querySelectorAll('.location-option,.time-option').forEach(e=>e.classList.remove('selected'))
}
function selectLocation(e){
document.querySelectorAll('.location-option').forEach(el=>el.classList.remove('selected'));
e.classList.add('selected');selectedLocation=e.getAttribute('data-location')
}
function selectTime(e){
document.querySelectorAll('.time-option').forEach(el=>el.classList.remove('selected'));
e.classList.add('selected');selectedTime=e.getAttribute('data-time')
}
function confirmMeetup(){
if(!selectedLocation||!selectedTime){alert('Please select both location and time for the meetup.');return}
alert(`🎉 Meetup confirmed!\n\n📍 Location: ${selectedLocation}\n⏰ Time: ${selectedTime}\n\nThe seller will be notified!`);
setTimeout(()=>addSmartNotification('meetup'),3000);
setTimeout(()=>closeProductDetails(),1000)
}
function generateTimeSlots(){
const g=document.getElementById('timeGrid');g.innerHTML='';
times.forEach(t=>{
const o=document.createElement('div');o.className='time-option';
o.setAttribute('data-time',t);o.textContent=t;o.onclick=()=>selectTime(o);g.appendChild(o)
})
}
function generateReviews(c){
const l=document.getElementById('reviewsList');l.innerHTML='';
for(let i=0;i<Math.min(4,c);i++){
const r=reviews[i%reviews.length],n=names[i%names.length],d=document.createElement('div');
d.className='review-item';
d.innerHTML=`<div class="review-header"><span class="reviewer-name">${n}</span><span class="review-stars">${'⭐'.repeat(r.rating)}</span></div><div class="review-text">${r.text}</div>`;
l.appendChild(d)
}
}
function openUserProfile(userId){
const user=userProfiles[userId];
if(!user)return;
document.getElementById('profileTitle').textContent=`${user.name}'s Profile`;
const content=document.getElementById('profileContent');
content.innerHTML=`
<div style="background:var(--glass);backdrop-filter:blur(20px)">
<div style="padding:30px;background:linear-gradient(135deg,var(--glass),rgba(255,215,0,.1));border-bottom:1px solid var(--border)">
<div style="display:flex;align-items:center;gap:30px;margin-bottom:20px">
<div style="width:120px;height:120px;background:linear-gradient(135deg,var(--accent),var(--accent2));border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:48px;border:4px solid var(--border)">${user.avatar}</div>
<div style="flex:1">
<h2 style="color:var(--accent);margin-bottom:10px;font-size:28px">${user.name}</h2>
<div style="display:flex;align-items:center;gap:15px;margin-bottom:15px">
<span style="color:var(--accent);font-size:18px">${'⭐'.repeat(Math.floor(user.rating))}</span>
<span style="color:var(--text);font-weight:600">${user.rating}/5.0 (${user.reviews} reviews)</span>
</div>
<p style="color:var(--text2);margin-bottom:20px;line-height:1.5">${user.bio}</p>
<p style="color:var(--text2);font-size:14px">Member since ${user.memberSince}</p>
</div>
</div>
<div style="display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px">
${user.badges.map(badge=>`<span style="background:linear-gradient(135deg,var(--accent),var(--accent2));color:#000;padding:6px 12px;border-radius:15px;font-size:12px;font-weight:600">${badge}</span>`).join('')}
</div>
<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:20px;background:rgba(0,0,0,.2);padding:20px;border-radius:15px;border:1px solid var(--border)">
<div style="text-align:center"><div style="font-size:24px;font-weight:bold;color:var(--accent)">${user.stats.totalSales}</div><div style="color:var(--text2);font-size:12px">Total Sales</div></div>
<div style="text-align:center"><div style="font-size:24px;font-weight:bold;color:var(--accent)">${user.stats.activeListings}</div><div style="color:var(--text2);font-size:12px">Active Listings</div></div>
<div style="text-align:center"><div style="font-size:16px;font-weight:bold;color:var(--accent)">${user.stats.responseTime}</div><div style="color:var(--text2);font-size:12px">Response Time</div></div>
</div>
</div>
<div style="padding:30px">
<h3 style="color:var(--accent);margin-bottom:20px;display:flex;align-items:center;gap:10px"><span>🛍️</span>Items for Sale</h3>
<div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px">
${user.items.map(item=>`
<div style="background:var(--glass);border:1px solid var(--border);border-radius:15px;padding:20px;backdrop-filter:blur(10px);${item.status==='sold'?'opacity:0.6;':''}">
<div style="display:flex;align-items:center;gap:15px;margin-bottom:15px">
<div style="font-size:32px">${item.emoji}</div>
<div style="flex:1">
<h4 style="color:var(--text);margin-bottom:5px">${item.name}</h4>
<div style="color:var(--accent);font-weight:bold;font-size:18px">฿${item.price.toLocaleString()}</div>
</div>
</div>
<div style="display:flex;justify-content:space-between;align-items:center">
<span style="background:${item.status==='active'?'rgba(0,255,0,.2)':'rgba(255,0,0,.2)'};color:${item.status==='active'?'#00ff00':'#ff6b6b'};padding:4px 8px;border-radius:8px;font-size:12px;font-weight:600">${item.status.toUpperCase()}</span>
<span style="color:var(--text2);font-size:12px">${item.category}</span>
</div>
</div>
`).join('')}
</div>
</div>
</div>
`;
const modal=document.getElementById('userProfileModal');
modal.style.display='flex';modal.classList.add('show');document.body.style.overflow='hidden'
}
function closeUserProfile(){
const modal=document.getElementById('userProfileModal');modal.classList.remove('show');
setTimeout(()=>{modal.style.display='none';document.body.style.overflow='auto'},300)
}
function initAnimations(){
const o=new IntersectionObserver(entries=>{
entries.forEach(e=>{
if(e.isIntersecting){e.target.style.opacity='1';e.target.style.transform='translateY(0)'}
})
},{threshold:.1});
document.querySelectorAll('.product-card, .category-card').forEach(c=>{
c.style.opacity='0';c.style.transform='translateY(30px)';c.style.transition='all 0.6s ease';o.observe(c)
})
}
window.addEventListener('click',e=>{
if(e.target===document.getElementById('chatModal'))closeChat();
if(e.target===document.getElementById('productModal'))closeProductDetails();
if(e.target===document.getElementById('wishlistModal'))toggleWishlist();
if(e.target===document.getElementById('userProfileModal'))closeUserProfile()
});
document.addEventListener('keydown',e=>{
if(e.key==='Escape'){
const modals=['chatModal','productModal','wishlistModal','userProfileModal'];
modals.forEach(id=>{
const modal=document.getElementById(id);
if(modal&&modal.style.display==='flex'){
if(id==='wishlistModal')toggleWishlist();
else if(id==='chatModal')closeChat();
else if(id==='productModal')closeProductDetails();
else if(id==='userProfileModal')closeUserProfile()
}
});
if(document.getElementById('notificationPanel').classList.contains('show'))toggleNotifications()
}
});
</script>

</body>
</html>
